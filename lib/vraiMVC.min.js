(function(){window.Vrai={};var a=function(a,b){var c=this;this.modelName=a,Vrai.Model[a]=function(b){this.modelProtoReference=c,this.objid=Math.round(Math.random()*1e8),this.init=function(){for(var d in Vrai.Model[a].defaults)this[d]=b.hasOwnProperty(d)?b[d]:Vrai.Model[a].defaults[d];Vrai.Model[c.modelName].views[this.objid]=[],Vrai.Model[c.modelName].collection.push(this)},this.set=function(a){for(var b in a)this[b]=a[b];this.notify()},this.get=function(a){return this[a]},this.remove=function(){for(var a in Vrai.Model[c.modelName].views[this.objid])Vrai.Model[c.modelName].views[this.objid][a].remove();delete Vrai.Model[c.modelName].views[this.objid];var b;for(var d=0;d<Vrai.Model[c.modelName].collection.length;d++)if(Vrai.Model[c.modelName].collection[d].objid===this.objid){b=d;break}Vrai.Model[c.modelName].collection.splice(b,1)},this.notify=function(){for(var a in Vrai.Model[c.modelName].views[this.objid])Vrai.Model[c.modelName].views[this.objid][a]._render()},this.init()},Vrai.Model[a].collection=[],Vrai.Model[a].views={},Vrai.Model[a].defaults=function(){var a={};for(var c in b)a[c]=b[c];return a}();return Vrai.Model[a]},b=function(a,b){Vrai.View[a]=function(a){var c=this;this.model=a,this.init=function(){for(var a in b)this[a]=b[a];var c=this.model.modelProtoReference;Vrai.Model[c.modelName].views[this.model.objid].push(this),this.el=document.createElement(b.tag),this.container.appendChild(this.el);return this},this._render=function(){this.el.innerHTML=this.template.render(this.model),b.hasOwnProperty("events")&&b.events.call(c),b.hasOwnProperty("render")&&b.render.call(c);return this},this.remove=function(){this.el.parentNode.removeChild(this.el)},this.init()._render()};return Vrai.View[a]};Vrai.Model=a,Vrai.View=b})()